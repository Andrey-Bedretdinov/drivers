- Добавить атрибут для чтения адреса ввода-вывода

---

## Сборка драйвера  
Запускаю `make`, ядро собирает модуль, появляются предупреждения о версии компилятора — это нормально.  
В конце получается файл `pci_net_driver.ko`.

```shell
andrey@drivers-vm:~/drivers/practice/8$ make
make -C /lib/modules/6.8.0-87-generic/build M=/home/andrey/drivers/practice/8 modules
make[1]: вход в каталог «/usr/src/linux-headers-6.8.0-87-generic»
warning: the compiler differs from the one used to build the kernel
  The kernel was built by: x86_64-linux-gnu-gcc-12 (Ubuntu 12.3.0-1ubuntu1~22.04.2) 12.3.0
  You are using:           gcc-12 (Ubuntu 12.3.0-1ubuntu1~22.04.2) 12.3.0
  CC [M]  /home/andrey/drivers/practice/8/pci_net_driver.o
  MODPOST /home/andrey/drivers/practice/8/Module.symvers
  CC [M]  /home/andrey/drivers/practice/8/pci_net_driver.mod.o
  LD [M]  /home/andrey/drivers/practice/8/pci_net_driver.ko
  BTF [M] /home/andrey/drivers/practice/8/pci_net_driver.ko
Skipping BTF generation for /home/andrey/drivers/practice/8/pci_net_driver.ko due to unavailability of vmlinux
make[1]: выход из каталога «/usr/src/linux-headers-6.8.0-87-generic»
```

## Загрузка драйвера  
Через `sudo insmod pci_net_driver.ko` загружаю модуль в ядро.

```shell
andrey@drivers-vm:~/drivers/practice/8$ sudo insmod pci_net_driver.ko
```

## Проверка логов  
Смотрю последние сообщения через `sudo dmesg | tail -n 50`.  
Видно, что драйвер получает пакеты, выводит их hex-дамп и печатает их длину — значит, сетевые колбэки работают.

```shell
andrey@drivers-vm:~/drivers/practice/8$ sudo dmesg | tail -n 50
[538344.999344] pci_net пакет: 000000e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538344.999345] pci_net пакет: 000000f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538344.999346] pci_net пакет: 00000100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538344.999347] pci_net пакет: 00000110: 00 00 00 00 00 00 63 82 53 63 35 01 01 3d 07 01  ......c.Sc5..=..
[538344.999348] pci_net пакет: 00000120: 52 54 00 24 af 60 37 11 01 02 06 0c 0f 1a 1c 79  RT.$.`7........y
[538344.999349] pci_net пакет: 00000130: 03 21 28 29 2a 77 f9 fc 11 39 02 02 40 0c 0a 64  .!()*w...9..@..d
[538344.999349] pci_net пакет: 00000140: 72 69 76 65 72 73 2d 76 6d ff                    rivers-vm.
[538345.100061] pci_net: пакет получен в hard_start_xmit, длина=107 байт
[538345.100075] pci_net пакет: 00000000: 33 33 00 00 00 fb 52 54 00 24 af 60 86 dd 60 04  33....RT.$.`..`.
[538345.100078] pci_net пакет: 00000010: 77 cd 00 35 11 ff fe 80 00 00 00 00 00 00 3a f6  w..5..........:.
[538345.100080] pci_net пакет: 00000020: f5 99 7d f0 35 89 ff 02 00 00 00 00 00 00 00 00  ..}.5...........
[538345.100081] pci_net пакет: 00000030: 00 00 00 00 00 fb 14 e9 14 e9 00 35 f1 ae 00 00  ...........5....
[538345.100082] pci_net пакет: 00000040: 00 00 00 02 00 00 00 00 00 00 05 5f 69 70 70 73  ..........._ipps
[538345.100083] pci_net пакет: 00000050: 04 5f 74 63 70 05 6c 6f 63 61 6c 00 00 0c 00 01  ._tcp.local.....
[538345.100083] pci_net пакет: 00000060: 04 5f 69 70 70 c0 12 00 0c 00 01                 ._ipp......
[538352.009018] pci_net: пакет получен в hard_start_xmit, длина=62 байт
[538352.009024] pci_net пакет: 00000000: 33 33 00 00 00 02 52 54 00 24 af 60 86 dd 60 04  33....RT.$.`..`.
[538352.009026] pci_net пакет: 00000010: b9 a9 00 08 3a ff fe 80 00 00 00 00 00 00 3a f6  ....:.........:.
[538352.009028] pci_net пакет: 00000020: f5 99 7d f0 35 89 ff 02 00 00 00 00 00 00 00 00  ..}.5...........
[538352.009029] pci_net пакет: 00000030: 00 00 00 00 00 02 85 00 99 2d 00 00 00 00        .........-....
[538353.108832] pci_net: пакет получен в hard_start_xmit, длина=107 байт
[538353.108847] pci_net пакет: 00000000: 33 33 00 00 00 fb 52 54 00 24 af 60 86 dd 60 04  33....RT.$.`..`.
[538353.108850] pci_net пакет: 00000010: 77 cd 00 35 11 ff fe 80 00 00 00 00 00 00 3a f6  w..5..........:.
[538353.108851] pci_net пакет: 00000020: f5 99 7d f0 35 89 ff 02 00 00 00 00 00 00 00 00  ..}.5...........
[538353.108853] pci_net пакет: 00000030: 00 00 00 00 00 fb 14 e9 14 e9 00 35 f1 ae 00 00  ...........5....
[538353.108853] pci_net пакет: 00000040: 00 00 00 02 00 00 00 00 00 00 05 5f 69 70 70 73  ..........._ipps
[538353.108854] pci_net пакет: 00000050: 04 5f 74 63 70 05 6c 6f 63 61 6c 00 00 0c 00 01  ._tcp.local.....
[538353.108855] pci_net пакет: 00000060: 04 5f 69 70 70 c0 12 00 0c 00 01                 ._ipp......
[538353.532961] pci_net: пакет получен в hard_start_xmit, длина=330 байт
[538353.532974] pci_net пакет: 00000000: ff ff ff ff ff ff 52 54 00 24 af 60 08 00 45 c0  ......RT.$.`..E.
[538353.532977] pci_net пакет: 00000010: 01 3c 00 00 40 00 40 11 38 f2 00 00 00 00 ff ff  .<..@.@.8.......
[538353.532978] pci_net пакет: 00000020: ff ff 00 44 00 43 01 28 5d e4 01 01 06 00 11 7e  ...D.C.(]......~
[538353.532980] pci_net пакет: 00000030: 80 fa 00 0f 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532981] pci_net пакет: 00000040: 00 00 00 00 00 00 52 54 00 24 af 60 00 00 00 00  ......RT.$.`....
[538353.532981] pci_net пакет: 00000050: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532983] pci_net пакет: 00000060: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532983] pci_net пакет: 00000070: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532984] pci_net пакет: 00000080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532985] pci_net пакет: 00000090: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532986] pci_net пакет: 000000a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532987] pci_net пакет: 000000b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532988] pci_net пакет: 000000c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532989] pci_net пакет: 000000d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532990] pci_net пакет: 000000e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532990] pci_net пакет: 000000f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532991] pci_net пакет: 00000100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
[538353.532992] pci_net пакет: 00000110: 00 00 00 00 00 00 63 82 53 63 35 01 01 3d 07 01  ......c.Sc5..=..
[538353.532993] pci_net пакет: 00000120: 52 54 00 24 af 60 37 11 01 02 06 0c 0f 1a 1c 79  RT.$.`7........y
[538353.532994] pci_net пакет: 00000130: 03 21 28 29 2a 77 f9 fc 11 39 02 02 40 0c 0a 64  .!()*w...9..@..d
[538353.532995] pci_net пакет: 00000140: 72 69 76 65 72 73 2d 76 6d ff                    rivers-vm.
```

## Проверка sysfs  
Выполняю `ls -l /sys/bus/pci/devices/*/io_address`.  
Появился файл:  
`/sys/bus/pci/devices/0000:01:00.0/io_address`  

```shell
andrey@drivers-vm:~/drivers/practice/8$ ls -l /sys/bus/pci/devices/*/io_address
-r--r--r-- 1 root root 4096 дек 14 18:19 /sys/bus/pci/devices/0000:01:00.0/io_address
```
